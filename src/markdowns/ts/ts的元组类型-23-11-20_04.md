#### 元组（tuple）

> <font color=red>元组（tuple）</font>是 TypeScript 特有的数据类型，JavaScript 没有单独区分这种类型。它表示成员类型可以自由设置的数组，即数组的各个成员的类型可以不同。

- 由于成员的类型可以不一样，所以元组必须明确声明每个成员的类型 **和数组声明的方式是不一样的,数组的是 number[]**。

  ```ts
  const s: [string, boolean, number] = ["a", false, 1];
  ```

- 使用元组的时候，必须明确给出类型的声明，<font color=red>不可省略</font>, 否则 TypeScript 会把一个值自动推断为数组。

  ```ts
  // a 的类型被推断为 (number | boolean)[]
  let a = [1, true];
  ```

- 元组成员的类型可以添加问号后缀（?），表示该成员是可选的。**注意，问号只能用于元组的尾部成员，也就是说，所有可选成员必须在必选成员之后。**

  ```ts
  let a: [number, boolean?] = [1];
  ```

  ```ts
  type myTuple = [number, number, number?, string?];
  ```

- 元组的成员数量是有限的，越界的成员则会报错；若想定义的元组不限制成员数量，可使用拓展运算符声明

  ```ts
  let x: [string, string] = ["a", "b"];
  x[2] = "c"; // 报错

  // 使用拓展运算符定义(扩展运算符（...）用在元组的任意位置都可以，它的后面只能是一个数组或元组。)
  type NamesNum = [string, ...number[]];

  const a: NamesNum = ["A", 1, 2];
  const b: NamesNum = ["B", 1, 2, 3];

  // 在不确定元组成员的类型和数量时，可如下定义(但意义不大)
  type Tuple = [...any[]];
  ```

- 元组的成员可以添加成员名，这个成员名是说明性的，可以任意取名，没有实际作用。

  ```ts
  type Color = [red: number, green: number, blue: number];
  const c: Color = [255, 255, 255];
  ```

- 元组可以通过方括号，读取成员类型。

  ```ts
  type Tuple = [string, number];
  type Age = Tuple[1]; // number

  // 由于元组的成员都是数值索引，即索引类型都是number，所以可以像下面这样读取。
  type Tuple = [string, number, Date];
  type TupleEl = Tuple[number]; // string|number|Date
  ```

#### 只读元组

- 元组也可以是只读的，不允许修改，有两种写法。

  ```ts
  // 写法一
  type t = readonly [number, string];

  // 写法二
  type t = Readonly<[number, string]>;

  // 两种写法都可以得到只读元组，其中写法二是一个泛型，用到了工具类型Readonly<T>。
  ```

- 跟数组一样，只读元组是元组的父类型。所以，元组可以替代只读元组，而只读元组不能替代元组。

  ```ts
  type t1 = readonly [number, number];
  type t2 = [number, number];

  let x: t2 = [1, 2];
  let y: t1 = x; // 正确

  x = y; // 报错

  // 类型t1是只读元组，类型t2是普通元组。t2类型可以赋值给t1类型，反过来就会报错。
  ```
