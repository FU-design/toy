</br>

> <font size=3>JSON 的全称是 "<font color=red>JavaScript Object Notation</font>" ——JavaScript 对象表示法，ECMAScript 5 中提供了内置函数 <font color=red>JSON.stringify()</font> 和 <font color=red>JSON.parse()</font> 用来序列化和还原 JavaScript 对象。</font>

#### JSON 的特点

- 简单值：字符串，数值，布尔值，null，undefined 不可
- 复杂数据类型：
  1. 对象：对象表示有序键/值对
  2. 数组：数组表示可通过有序索引访问值的有序列表，数组的值可以是任意类型。
- JSON 没有<font color=red>变量</font>、<font color=red>函数</font>、<font color=red>对象实例（原型对象）</font>的概念。
- 对于复杂的数据结构，一般的**顶级结构**为 {},[]
- 存在内置的 <font color=red>toJSON()</font> 方法

#### JSON.stringify()

- 序列化

  - 语法: <font color=red>_JSON.stringify(value, replacer , space)_</font>
  - 参数：

    - **value**: 预备转化为 JSON 字符串的值
    - **replacer**: Function | any[] | null ===> 过滤器

      1.  函数： 被序列化的值的每个属性都会经过该函数的转换和处理。
      2.  数组： 只有包含在这个数组中的属性名才会被序列化到最终的 JSON 字符串中。
      3.  无值（null）：null 或者未提供，则对象所有的属性都会被序列化。

    - **space**:

      1. 指定缩进用的空白字符串，用于美化输出（pretty-print）；
      2. 如果参数是个数字，它代表有多少的空格；上限为 10。该值若小于 1，则意味着没有空格；
      3. 如果该参数为字符串（当字符串长度超过 10 个字母，取其前 10 个字母），该字符串将被作为空格；
      4. 如果该参数没有提供（或者为 null），将没有空格。

  - 规则：

    - 在序列化对象的时候，对象中的 undefined、任意函数、symbol 值，都会被忽略。
    - 在序列化数组的时候，数组中会被转化为 null。
    - 函数、undefined 被单独转换时，会返回 undefined。
    - NaN 和 Infinity 格式的数值及 null 都会被当做 null。
    - 其他类型的对象，包括 Map/Set/WeakMap/WeakSet，仅会序列化可枚举的属性

- 实例：对象序列化

  ```js
  const obj = {
    a: 3,
    b: 4,
    c: null,
    d: undefined,
    <!-- 此处重写了对象中的 get 方法，该方法在对象被使用的时候会执行 -->
    get e() {
      console.log("1");
      return 555;
    },
  };
  console.log(JSON.stringify(obj, null, 2));
  ```

  ```json
  > "1"
  > "{
      "a": 3,
      "b": 4,
      "c": null,
      "e": 555
    }"
  ```

- 实例：数组序列化

  ```js
  function add1() {
    console.log("add1");
  }
  const arr = [
    add1,
    {
      name: "Tom",
      add2: function () {
        console.log("add2");
      },
    },
  ];
  console.log(JSON.stringify(arr));
  ```

  ```js
  > '[null,{"name":"Tom"}]'
  ```

- 实例：第二个参数传入为数组

  ```js
  let book = {
    title: "Professional JavaScript",
    authors: ["Nicholas C. Zakas", "Matt Frisbie"],
    edition: 4,
    year: 2017,
  };

  // console.log(" :>> ", JSON.stringify(book, ["title", "authors"]));
  // {"title":"Professional JavaScript","authors":["Nicholas C. Zakas","Matt Frisbie"]}
  ```

- 实例：第二个参数传入为函数（函数默认接收两个参数 **key** 和 **val**）

  ```js
  let book = {
    title: "Professional JavaScript",
    authors: ["Nicholas C. Zakas", "Matt Frisbie"],
    edition: 4,
    year: 2017,
  };

  console.log(
    " :>> ",
    JSON.stringify(
      book,
      (key, val) => {
        console.log("key :>> ", key);
        console.log("val :>> ", val);
        // 必须返回，不返回key值是没有的
        return val;
      },
      2
    )
  );
  ```
